{% extends 'base.html' %}
{% block content %}
  <a href="{{ url_for('index') }}">← Retour</a>
  <h2>Détails du collège: {{ nom }} ({{ departement }})</h2>

  <div class="card">
    <p><strong>Moyenne des taux :</strong> {% if moyenne is not none %}{{ '%.2f' % moyenne }} %{% else %}N/A{% endif %}</p>
    <p><strong>Total admis / présents (toutes sessions) :</strong> {{ totals[0] if totals else 'N/A' }} / {{ totals[1] if totals else 'N/A' }}</p>
    <p><strong>Années disponibles :</strong> {{ annees|join(', ') }}</p>
  </div>

  <h3>Par session</h3>
  <table>
    <thead><tr><th>Année</th><th>Présents</th><th>Admis</th><th>Taux</th></tr></thead>
    <tbody>
      {% for r in sessions %}
        <tr>
          <td>{{ r[0] }}</td>
          <td>{{ r[3] }}</td>
          <td>{{ r[4] }}</td>
          <td>{% if r[3] > 0 %}{{ ('%.2f' % ((r[4]/r[3])*100)) }} %{% else %}N/A{% endif %}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
